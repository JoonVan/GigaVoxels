/////////////////////////////////////////////////////////////////////////////////
//
// FRAGMENT SHADER
//
// Shadow Mapping
//
// - 2nd pass
//
// The scene is rendered from the point of view of the camera.
//
// Mandatory :
// - a FBO (frame buffer object) with a unique depth texture bound to its depth attachement
//
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// VERSION
////////////////////////////////////////////////////////////////////////////////

#version 400

////////////////////////////////////////////////////////////////////////////////
// INPUT
////////////////////////////////////////////////////////////////////////////////

// Position in eye coordinate system
//in vec3 iPosition;

// Normal in eye coordinate system
//in vec3 iNormal;

// Shadow map coordinate
in vec4 oShadowCoord;

////////////////////////////////////////////////////////////////////////////////
// UNIFORM
////////////////////////////////////////////////////////////////////////////////

// Shadow Map texture
uniform sampler2DShadow uShadowMap;

////////////////////////////////////////////////////////////////////////////////
// OUTPUT
////////////////////////////////////////////////////////////////////////////////

layout (location = 0) out vec4 oFragColor;

////////////////////////////////////////////////////////////////////////////////
// PROGRAM
////////////////////////////////////////////////////////////////////////////////
void main()
{
	float shadow = textureProj( uShadowMap, iShadowCoord );

	oFragColor = vec4( 1.0, 0.0, 0.0, 1.0 ) * shadow;
}
